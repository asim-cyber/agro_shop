{% extends "base.html" %}
{% block content %}
<div class="container py-5">

  <!-- Header -->
  <div class="d-flex flex-column flex-md-row justify-content-between align-items-start align-items-md-center mb-4 gap-3">
    <h3 class="fw-bold text-dark mb-0">ðŸ“’ Ledger Summary</h3>
    <div class="d-flex flex-wrap gap-2">
      <a href="{% url 'ledger:add_ledger' %}" class="btn btn-primary px-3">
        âž• Add New Ledger
      </a>
      <a href="{% url 'ledger:pay_ledger' %}" class="btn btn-success px-3">
        ðŸ’° Pay Ledger
      </a>
    </div>
  </div>

  <!-- Ledger Summary -->
  {% for group in ledger_summary %}
  <div class="card border rounded-3 mb-4" style="background-color: #ffffff;">
    <div class="card-header bg-white border-bottom d-flex justify-content-between align-items-center py-3 px-4">
      <h5 class="mb-0 fw-semibold text-primary">{{ group.customer.name }}</h5>
      <span class="fw-bold text-dark">
        Final Balance:
        <span class="{% if group.final_balance < 0 %}text-danger{% else %}text-success{% endif %}">
          {{ group.final_balance|floatformat:2 }}
        </span>
      </span>
    </div>

    <div class="card-body p-0">
      <div class="table-responsive">
        <table class="table table-bordered align-middle mb-0 ledger-table">
          <thead class="table-light text-center">
            <tr>
              <th>Date</th>
              <th>Description</th>
              <th class="text-end text-danger">Debit</th>
              <th class="text-end text-success">Credit</th>
              <th class="text-end text-primary">Running Balance</th>
            </tr>
          </thead>
          <tbody>
            {% for item in group.entries %}
            <tr>
              <td>{{ item.ledger.date|date:"Y-m-d" }}</td>
              <td>{{ item.ledger.description }}</td>
              <td class="text-end text-danger">{{ item.ledger.debit_amount|floatformat:2 }}</td>
              <td class="text-end text-success">{{ item.ledger.credit_amount|floatformat:2 }}</td>
              <td class="text-end fw-semibold text-primary">{{ item.balance|floatformat:2 }}</td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>
  {% empty %}
  <div class="alert alert-info text-center">No ledger entries found.</div>
  {% endfor %}
</div>

<!-- âœ… Clean White Flat Theme + Light Gray Row Stripes -->
<style>
  body {
    background-color: #eef1f5;
  }

  .card {
    border: 1px solid #dee2e6 !important;
    box-shadow: none !important;
  }

  .card-header {
    border-bottom: 1px solid #dee2e6 !important;
  }

  table {
    background-color: #fff !important;
  }

  thead.table-light th {
    background-color: #f8f9fa !important;
    color: #333 !important;
    font-weight: 600;
  }

  /* ðŸŽ¨ Zebra striping for table rows */
  .ledger-table tbody tr:nth-child(odd) {
    background-color: #ffffff !important;
  }

  .ledger-table tbody tr:nth-child(even) {
    background-color: #f8f9fa !important;
  }

  .ledger-table tbody tr:hover {
    background-color: #e9ecef !important;
  }

  .btn {
    border-radius: 8px !important;
    font-weight: 600;
    transition: all 0.3s ease;
  }

  .btn-primary {
    background-color: #2f78c4 !important;
    border: none !important;
  }

  .btn-primary:hover {
    background-color: #2566a8 !important;
  }

  .btn-success {
    background-color: #198754 !important;
    border: none !important;
  }

  .btn-success:hover {
    background-color: #157347 !important;
  }

  @media (max-width: 768px) {
    h3 {
      font-size: 1.4rem;
    }

    .btn {
      width: 100%;
    }

    .d-flex.flex-md-row {
      flex-direction: column !important;
      align-items: stretch !important;
    }
  }
</style>
{% endblock %}
