{% extends "base.html" %}
{% block content %}
<div class="container my-4">
  <div class="card shadow">
    <div class="card-header bg-dark text-white d-flex justify-content-between align-items-center">
      <h4 class="mb-0">Invoice #{{ invoice.id }}</h4>
      <div>
        <!-- Print Invoice Button -->
        <a href="{% url 'sales:print_invoice' invoice.id %}" 
           class="btn btn-warning btn-sm" target="_blank">
          <i class="fa fa-print"></i> Print Invoice
        </a>
        <!-- Back to List Button -->
        <a href="{% url 'sales:list_invoices' %}" class="btn btn-secondary btn-sm">
          <i class="fa fa-arrow-left"></i> Back to List
        </a>
      </div>
    </div>

    <div class="card-body">
      <!-- Invoice Main Details -->
      <p><strong>Date:</strong> {{ invoice.date }}</p>
      <p><strong>Customer:</strong> {{ invoice.customer.name }}</p>
      <p><strong>Payment Method:</strong> {{ invoice.payment_method }}</p>
      <p><strong>Total Quantity:</strong> {{ invoice.total_quantity }}</p>
      <p><strong>Grand Total:</strong> {{ invoice.grand_total }}</p>

      <hr>

      <!-- Items Table -->
      <table class="table table-striped table-hover">
        <thead class="table-dark">
          <tr>
            <th>Product</th>
            <th>Quantity</th>
            <th>Price</th>
          </tr>
        </thead>
        <tbody>
          {% for item in invoice.items.all %}
          <tr>
            <td>{{ item.product.name }}</td>
            <td>{{ item.quantity }}</td>
            <td>{{ item.price }}</td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="3" class="text-center py-3">No items found for this invoice.</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>

      <h5 class="text-end fw-bold mt-3">Total: {{ invoice.total_amount }}</h5>
    </div>
  </div>
</div>
{% endblock %}
