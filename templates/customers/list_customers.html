{% extends "base.html" %}
{% block content %}
<div class="container my-5">
  <div class="card shadow-sm border-0">
    <div class="card-body p-4">

      <!-- Header -->
      <h3 class="text-center fw-bold mb-4">Customer List</h3>

      <!-- Search Form -->
      <form method="get" class="row g-3 justify-content-center mb-4">
        <div class="col-md-4 col-sm-6">
          <input type="text" name="name" class="form-control" placeholder="Search by Name ..." value="{{ request.GET.name }}">
        </div>
        <div class="col-md-4 col-sm-6">
          <input type="text" name="cnic" class="form-control" placeholder="Search by CNIC ..." value="{{ request.GET.cnic }}">
        </div>
        <div class="col-md-2 col-sm-6 d-grid">
          <button type="submit" class="btn btn-primary">Search</button>
        </div>
      </form>

      <!-- Table -->
      {% if customers %}
      <div class="table-responsive">
        <table class="table table-bordered align-middle text-center mb-0">
          <thead style="background-color: #f8f9fa;">
            <tr>
              <th class="fw-semibold">Name</th>
              <th class="fw-semibold">Father Name</th>
              <th class="fw-semibold">CNIC</th>
              <th class="fw-semibold">Mobile</th>
              <th class="fw-semibold">City</th>
              <th class="fw-semibold">Resident</th>
              <th class="fw-semibold">Address</th>
              <th class="fw-semibold">Action</th>
            </tr>
          </thead>
          <tbody>
            {% for customer in customers %}
            <tr>
              <td>{{ customer.name }}</td>
              <td>{{ customer.father_name }}</td>
              <td>{{ customer.cnic }}</td>
              <td>{{ customer.mobile }}</td>
              <td>{{ customer.city }}</td>
              <td>{{ customer.resident }}</td>
              <td class="text-wrap">{{ customer.address }}</td>
              <td>
                <a href="{% url 'customers:update_customer' customer.id %}" class="btn btn-outline-primary btn-sm me-1">Update</a>
                <a href="{% url 'ledger:add_ledger' %}?customer={{ customer.id }}" class="btn btn-info btn-sm text-white">Ledger</a>
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
      {% else %}
      <div class="alert alert-info text-center mt-4">No customers found.</div>
      {% endif %}

    </div>
  </div>
</div>

<!-- âœ… Styling -->
<style>
  body {
    background-color: #eef2f7;
    font-family: "Segoe UI", Arial, sans-serif;
  }

  .card {
    border-radius: 0.5rem;
  }

  h3 {
    color: #343a40;
  }

  .table {
    border: 1.5px solid #dee2e6;
  }

  .table th, .table td {
    border: 1px solid #dee2e6;
    padding: 0.75rem;
    font-size: 0.95rem;
    vertical-align: middle;
  }

  .table-striped tbody tr:nth-of-type(odd) {
    background-color: #f9f9f9;
  }

  .btn {
    border-radius: 4px;
    font-size: 0.88rem;
  }

  .btn-outline-primary {
    border-color: #007bff;
  }

  .btn-outline-primary:hover {
    background-color: #007bff;
    color: #fff;
  }

  .btn-info {
    background-color: #17a2b8;
    border: none;
  }

  .btn-info:hover {
    background-color: #138496;
  }
</style>
{% endblock %}
