{% extends "base.html" %}
{% block content %}
<div class="container my-5">
  <!-- Header -->
  <div class="d-flex justify-content-between align-items-center mb-4 flex-wrap">
    <h2 class="fw-bold text-dark-navy mb-3">üõçÔ∏è Product List</h2>
    <a href="{% url 'products:add_product' %}" class="btn btn-success">
      ‚ûï Add Product
    </a>
  </div>

  <!-- Table Card -->
  <div class="card shadow border-0 rounded-4">
    <div class="card-body p-0">
      <div class="table-responsive">
        <table class="table table-striped table-hover align-middle mb-0">
          <thead class="table-dark text-center">
            <tr>
              <th>Image</th>
              <th>Name</th>
              <th>Category</th>
              <th>Price</th>
              <th>Total Qty</th>
              <th>Available Qty</th>
              <th>Date Added</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            {% for product in products %}
            <tr>
              <td class="text-center">
                {% if product.image %}
                  <img src="{{ product.image.url }}" alt="{{ product.name }}" class="img-thumbnail rounded shadow-sm" width="70" height="70">
                {% else %}
                  <span class="text-muted">No Image</span>
                {% endif %}
              </td>
              <td>{{ product.name }}</td>
              <td>{{ product.category.name }}</td>
              <td>Rs. {{ product.price|floatformat:2 }}</td>
              <td>{{ product.total_quantity }}</td>
              <td>{{ product.available_quantity }}</td>
              <td>{{ product.date_added|date:"Y-m-d" }}</td>
              <td class="text-center">
                <div class="d-flex flex-wrap justify-content-center gap-2">
                  <a href="{% url 'products:update_product' product.id %}" class="btn btn-warning btn-sm">‚úèÔ∏è Update</a>
                  <a href="{% url 'products:stock_in_list' product.id %}" class="btn btn-success btn-sm">üì¶ Stock In</a>
                  <a href="{% url 'products:stock_out_list' product.id %}" class="btn btn-danger btn-sm">üöö Stock Out</a>
                </div>
              </td>
            </tr>
            {% empty %}
            <tr>
              <td colspan="8" class="text-center py-4 text-muted">No products available.</td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>

<!-- ‚úÖ Custom Styling for Responsiveness -->
<style>
  body {
    background-color: #f8f9fa;
  }

  .text-dark-navy {
    color: #0f1c2e !important;
  }

  .card {
    transition: transform 0.3s ease, box-shadow 0.3s ease;
  }

  .card:hover {
    transform: scale(1.01);
  }

  table th, table td {
    vertical-align: middle !important;
  }

  /* Mobile responsiveness */
  @media (max-width: 768px) {
    h2 {
      font-size: 1.3rem;
    }

    .table thead {
      display: none;
    }

    .table tbody tr {
      display: block;
      margin-bottom: 1rem;
      background-color: #fff;
      border-radius: 10px;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
      padding: 10px;
    }

    .table tbody td {
      display: flex;
      justify-content: space-between;
      align-items: center;
      text-align: right;
      padding: 0.6rem;
      border: none;
    }

    .table tbody td::before {
      content: attr(data-label);
      font-weight: 600;
      text-align: left;
      color: #0f1c2e;
    }

    .d-flex.flex-wrap.gap-2 {
      flex-direction: column;
      gap: 0.4rem !important;
    }

    .btn-sm {
      width: 100%;
    }
  }
</style>
{% endblock %}
